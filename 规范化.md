# 规范化
## .editorconfig

### 简介
.editorconfig 文件的作用是定义代码编辑器的格式化规则，以确保团队成员在不同的编辑器或 IDE 中使用统一的代码风格。它主要用于跨团队协作时，避免因不同的编辑器设置导致代码格式不一致的问题。

### 如何生效
确保项目根目录有 .editorconfig 文件。
在编辑器中安装对应的插件（如 VS Code 的 EditorConfig for VS Code 扩展）。
编辑器会自动根据 .editorconfig 文件中的规则格式化代码

建立一个.editorconfig文件

```
# 顶层配置文件
root = true

# 通用设置
[*]
charset = utf-8
indent_style = space
indent_size = 2
end_of_line = lf
insert_final_newline = true
trim_trailing_whitespace = true

# 针对 Markdown 文件的特殊设置
[*.md]
trim_trailing_whitespace = false

# 针对 JSON 文件的特殊设置
[*.json]
indent_size = 2

# 针对 TypeScript 文件的特殊设置
[*.ts]
indent_size = 2

# 针对 JavaScript 文件的特殊设置
[*.js]
indent_size = 2
```

root = true：表示这是项目的顶层 .editorconfig 文件。
charset = utf-8：设置文件编码为 UTF-8。
indent_style = space 和 indent_size = 2：使用空格缩进，缩进大小为 2。
end_of_line = lf：统一使用 LF 换行符（适用于跨平台开发）。
insert_final_newline = true：文件末尾强制添加一个空行。
trim_trailing_whitespace = true：移除每行末尾的多余空格。
针对特定文件类型（如 Markdown、JSON、TypeScript 等）可以单独设置规则。

## prettier

### 简介
Prettier 是一个代码格式化工具，用于自动格式化代码，使其符合一致的风格规范。它可以帮助开发者专注于代码逻辑，而无需担心代码的格式问题。

### 建立一个.prettierc
```
{
  "semi": true, // 使用分号
  "singleQuote": true, // 使用单引号
  "tabWidth": 2, // 缩进大小为 2
  "useTabs": false, // 使用空格代替 Tab
  "trailingComma": "es5", // 在 ES5 中有效的地方添加尾随逗号
  "bracketSpacing": true, // 对象文字中括号之间加空格
  "arrowParens": "always", // 箭头函数参数始终加括号
  "endOfLine": "lf" // 使用 LF 作为换行符
}
```
### 建立一个.prettierignore

```
# 忽略 node_modules 目录
node_modules/

# 忽略打包输出目录
dist/

# 忽略环境变量文件
.env
.env.local
.env.*.local

# 忽略日志文件
*.log

# 忽略构建相关文件
build/
coverage/

# 忽略特定文件类型
*.min.js
*.min.css

# 忽略特定文件
package-lock.json
yarn.lock
```

### 批量处理
可以在package.json中进行配置
```
  "scripts": {
    "dev": "vite --open",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "prettier": "prettier --write ."
  },
```
是的，**`.editorconfig`**、**Prettier** 和 **ESLint** 可以同时使用，它们各自有不同的作用，且可以互补，帮助你更好地管理代码风格和质量。以下是它们的区别和如何协同使用的说明：

---

## 三者区别
### **1. `.editorconfig` 的作用**
- **主要功能**：统一团队成员的基本编辑器设置，例如缩进风格、缩进大小、文件编码、行尾符号等。
- **适用范围**：编辑器级别，影响所有文件类型。
- **优点**：
  - 轻量级，适用于跨编辑器和 IDE 的协作。
  - 解决团队成员因编辑器设置不同导致的格式问题（如缩进、换行符等）。

---

### **2. Prettier 的作用**
- **主要功能**：自动格式化代码，使代码风格一致。
- **适用范围**：代码格式化，支持多种语言（JavaScript、TypeScript、HTML、CSS、JSON 等）。
- **优点**：
  - 专注于代码格式化，规则固定，减少团队对代码风格的争论。
  - 可以与编辑器集成，保存时自动格式化代码。
- **局限性**：
  - 不检查代码逻辑或潜在错误，只负责格式化。

---

### **3. ESLint 的作用**
- **主要功能**：检查代码质量，发现潜在的错误和不符合规范的代码。
- **适用范围**：主要用于 JavaScript 和 TypeScript，支持自定义规则。
- **优点**：
  - 提供代码质量检查，帮助发现潜在的逻辑错误。
  - 可以与 Prettier 集成，避免规则冲突。
- **局限性**：
  - 默认规则不处理代码格式化，需要与 Prettier 配合。

---

### **如何协同使用**
1. **职责分离**：
   - **`.editorconfig`**：负责基础的编辑器设置（缩进、换行符等）。
   - **Prettier**：负责代码格式化（如缩进、引号、分号等）。
   - **ESLint**：负责代码质量检查（如未使用的变量、不安全的代码等）。

2. **配置 Prettier 和 ESLint 的集成**：
   - 使用 `eslint-config-prettier` 禁用 ESLint 中与格式化相关的规则，避免冲突。
   - 使用 `eslint-plugin-prettier` 将 Prettier 的格式化规则作为 ESLint 的规则运行。

   安装依赖：
   ```bash
   npm install eslint-config-prettier eslint-plugin-prettier --save-dev
   ```

   在 ESLint 配置中添加：
   ```javascript
   extends: [
     'eslint:recommended',
     'plugin:react/recommended',
     'plugin:@typescript-eslint/recommended',
     'prettier' // 禁用 ESLint 中与格式化相关的规则
   ],
   plugins: ['prettier'],
   rules: {
     'prettier/prettier': 'error', // 将 Prettier 的格式化规则作为 ESLint 错误
   },
   ```

3. **工作流建议**：
   - **`.editorconfig`**：确保团队成员的编辑器设置一致。
   - **Prettier**：保存时自动格式化代码。
   - **ESLint**：在提交代码前检查代码质量。

4. **在 `package.json` 中添加脚本**：
   ```json
   "scripts": {
     "lint": "eslint . --ext .js,.jsx,.ts,.tsx",
     "format": "prettier --write ."
   }
   ```

---

### **总结**
- **`.editorconfig`**：基础编辑器设置，适用于所有文件类型。
- **Prettier**：专注于代码格式化，确保代码风格一致。
- **ESLint**：专注于代码质量检查，发现潜在错误。
- **协同使用**：三者可以互补，`.editorconfig` 负责基础设置，Prettier 负责格式化，ESLint 负责代码质量检查，确保代码既美观又高质量。